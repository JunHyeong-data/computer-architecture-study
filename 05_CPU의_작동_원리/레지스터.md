# 📌 레지스터(Register) 개념 정리

레지스터는 CPU 내부에 있는 **초고속 기억 장치**로, 연산과 명령 실행에 직접적으로 사용되는 데이터들을 저장합니다. CPU마다 레지스터의 종류, 이름, 크기는 조금씩 다르지만, 기본적으로 아래와 같은 레지스터들이 공통적으로 존재합니다.

---

## ✅ 반드시 알아야 할 주요 레지스터

1. **프로그램 카운터 (Program Counter, PC)**
   - 다음에 실행할 명령어의 **메모리 주소**를 저장합니다.
   - CPU는 이 주소를 참조해 메모리에서 명령어를 가져옵니다.
   - 📌 *명령어 실행 후 자동으로 다음 주소로 증가하거나, 점프(jump) 명령으로 변경될 수 있음.*

2. **명령어 레지스터 (Instruction Register, IR)**
   - 방금 메모리에서 가져온 **명령어 자체**를 저장합니다.
   - 이 명령어를 해석하여 CPU가 수행할 작업을 결정합니다.

3. **메모리 주소 레지스터 (Memory Address Register, MAR)**
   - 메모리의 어느 위치에 접근할지 나타내는 **주소값**을 저장합니다.
   - 즉, 메모리 읽기/쓰기 시 '어디를?' 지정하는 레지스터입니다.

4. **메모리 버퍼 레지스터 (Memory Buffer Register, MBR)**
   - 메모리와 데이터 주고받기를 할 때 **실제 값(데이터나 명령어)**이 저장되는 임시 저장소입니다.
   - MAR이 가리키는 위치에서 값을 읽어오면, 그 값이 MBR에 저장됩니다.

5. **플래그 레지스터 (Flag Register) / 상태 레지스터**
   - 연산 결과에 대한 부가 정보를 담습니다 (예: Carry, Zero, Negative 등).
   - 프로그램 흐름 제어나 조건 분기에 사용됩니다.
   - 예시: `Zero Flag`가 1이면 연산 결과가 0이라는 의미.

6. **범용 레지스터 (General Purpose Register)**
   - 이름 그대로 자유롭게 사용 가능한 레지스터입니다.
   - 변수 저장, 중간 계산값 저장 등 다양한 용도에 활용됩니다.
   - x86 기준: EAX, EBX, ECX, EDX 등

7. **스택 포인터 (Stack Pointer, SP)**
   - 메모리 내 **스택 구조**의 맨 위 주소(꼭대기)를 가리킵니다.
   - 함수 호출, 지역 변수 저장, 리턴 주소 저장 등에 사용됩니다.
   - 스택은 후입선출(LIFO) 구조를 가지며, 메모리 내 특정 영역을 사용합니다.

8. **베이스 레지스터 (Base Register)**
   - **기준 주소(base address)**를 저장하며, 다른 값들과 더해 유효 주소를 계산할 때 사용됩니다.
   - 메모리 보호, 영역 분리 등에 활용되기도 합니다.

---

## 🧭 주소 지정 방식 (Addressing Mode)

CPU가 메모리에서 데이터를 가져올 때, 어떻게 주소를 계산해서 접근할지 정하는 방식입니다. 다양한 레지스터들을 이용하여 유효 주소를 계산합니다.

### 1. 📍 스택 주소 지정 방식 (Stack Addressing)
- **스택 포인터(SP)**를 기준으로 데이터를 저장하거나 꺼냅니다.
- 명령 실행 시 자동으로 스택 포인터가 증가하거나 감소합니다.
- ✅ 함수 호출 시 지역 변수, 리턴 주소 등을 저장하는 용도로 사용됩니다.

### 2. 📍 변위 주소 지정 방식 (Displacement Addressing)
- 오퍼랜드 필드의 값(**변위, displacement**)과 **레지스터의 값**을 더해서 유효 주소를 계산합니다.
- ✅ 배열 접근, 구조체 필드 접근 등에 많이 사용됩니다.

> **유효 주소 = 레지스터 값 + 변위**

### 3. 📍 상대 주소 지정 방식 (Relative Addressing)
- 오퍼랜드 필드의 값(**변위**)과 **프로그램 카운터(PC)**의 값을 더해서 유효 주소를 계산합니다.
- ✅ 점프 명령(jump), 분기(branch) 명령 등에 자주 쓰입니다.

> **유효 주소 = PC + 변위**

### 4. 📍 베이스 레지스터 주소 지정 방식 (Base Register Addressing)
- 오퍼랜드 필드의 값과 **베이스 레지스터**의 값을 더해서 유효 주소를 계산합니다.
- ✅ 프로그램 실행 시 코드, 데이터, 스택 등을 서로 구분해서 메모리 공간을 나눌 때 사용됩니다.

---

## 📘 용어 정리

| 용어 | 의미 |
|------|------|
| **오퍼랜드 필드 (Operand field)** | 명령어에서 데이터 또는 주소 정보를 포함하는 부분 |
| **변위 (Displacement)** | 기준 주소에 더해지는 값 (즉, 오프셋) |
| **유효 주소 (Effective Address)** | 실제 메모리 접근 시 사용되는 최종 주소 |

---

## 🔚 정리

- 레지스터는 CPU가 **빠르게 데이터에 접근하고 계산할 수 있도록 도와주는 핵심 구성 요소**입니다.
- 다양한 **주소 지정 방식**을 통해 레지스터 값과 명령어 정보를 조합하여 **정확한 메모리 주소(유효 주소)**를 계산합니다.

